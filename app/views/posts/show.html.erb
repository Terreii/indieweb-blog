<article class="h-entry" itemscope="" itemtype="http://schema.org/BlogPosting">
  <% set_meta_data(
    description: @post.summary,
    thumbnail: @post.thumbnail.present? ? @post.thumbnail : nil,
    url: full_url_for(@post)
  ) %>
  <h1 class="post__title p-name" itemprop="name headline"><%= set_title(@post.title) %></h1>

  <p class="post__meta">
    <% if @post.published? %>
      By <%= link_to root_url, class: "p-author h-card" do %>
        <%= image_tag gravatar_url(200), alt: "", height: 200, width: 200, class: "u-photo", hidden: true %>
        <%= t("general.author-full") %>
      <% end %> on
      <%= link_to(
        time_tag(@post.published_at, @post.published_at.to_date.to_s,
          class: "dt-published",
          itemprop: "dateCreated pubdate datePublished"
        ),
        post_url(@post),
        class: "u-url"
      ) %>
    <% end %>

    <% if logged_in? %>
      <%= link_to 'Edit', edit_post_path(@post), class: 'post__edit-link' %>
    <% end %>

    <% unless @post.tags.empty? %>
      <br />
      <span itemprop="tags">
        Tags:
        <%= render @post.tags %>
      </span>
    <% end %>
  </p>

  <% if @post.thumbnail.present? %>
    <div>
      <%= link_to @post.thumbnail do %>
        <%= image_tag @post.thumbnail, id: "thumbnail", class: "post_thumbnail", alt: "" %>
      <% end %>
    </div>
  <% end %>

  <div class="e-content" itemprop="articleBody">
    <%= @post.body %>
  </div>
</article>
